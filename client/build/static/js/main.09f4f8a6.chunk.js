(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{52:function(e,a,t){},53:function(e,a,t){},79:function(e,a,t){"use strict";t.r(a);var n=t(1),c=t.n(n),r=t(26),s=t.n(r),l=(t(52),t(7)),m=(t(53),t(4)),i="FETCH_START_AUTH",o="FETCH_SUCCESS_AUTH",u="FETCH_FAILURE_AUTH",_="SET_TOKEN_AUTH",p="SET_ERROR_AUTH",d="CLEAR_SPECIFIC_ERROR_AUTH",f="CLEAR_ERRORS_AUTH",E="CLEAR_DATA_AUTH",b="UPDATE_START_AUTH",v="UPDATE_SUCCESS_AUTH",g="UPDATE_FAILURE_AUTH",N="UPDATE_AVATAR_AUTH",h=function(){return{type:i}},k=function(e){return{type:o,payload:e}},y=function(e){return{type:u,payload:e}},w=function(e){return{type:p,payload:e}},O=function(e){return{type:d,payload:e}},j=function(){return{type:f}},S=function(){return{type:b}},x=function(e){return{type:v,payload:e}},C=function(e){return{type:g,payload:e}},A=function(e){return{type:N,payload:e}},T=t(5),I=t(12),U=t(3),L=t.n(U),D=t(9),R=t(44),F=t.n(R),P="TOGGLE_DROPMENU_NAVBAR",M="TOGGLE_AUTH_FORM_NAVBAR",H="RESET_NAVBAR",B="TOGGLE_POPUP_WARNING_NAVBAR",W="TOGGLE_POPUP_IMAGE",q=function(){return{type:M}},G=function(){return{type:H}};var Q=function(){var e=Object(m.c)((function(e){return e.auth})).token;return{fetchData:Object(n.useCallback)((function(a){var t=a.url,n=a.method,c=a.data,r=a.options,s=function(){var a=Object(D.a)(L.a.mark((function a(){var r;return L.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,F()({url:t,method:n,data:c,headers:e&&{Authorization:"Basic ".concat(e.token)}});case 2:return r=a.sent,a.abrupt("return",r.data);case 4:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}();return r.isLocalStorage?Object(D.a)(L.a.mark((function e(){var a;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s();case 3:return a=e.sent,e.abrupt("return",a);case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})))():function(){var e=Object(D.a)(L.a.mark((function e(a){var t;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r.fetchStart&&a(r.fetchStart()),e.next=4,s();case 4:t=e.sent,a(r.fetchSuccess({data:t,options:r})),a(G()),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0),r.fetchFailure&&a(r.fetchFailure(e.t0.response.data.errors));case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(a){return e.apply(this,arguments)}}()}),[e])}},K="FETCH_SUCCESS_MARKS",V="ADD_BOOKMARK_MARKS",J="REMOVE_BOOKMARK_MARKS",z=function(e){return{type:K,payload:e}},X=function(e){return{type:V,payload:e}},Y=function(e){return{type:J,payload:e}},$=t(6),Z=t(2),ee=t(10);var ae=function(){var e=Object(n.useState)([{param:"username",type:"text",value:""},{param:"email",type:"email",value:""},{param:"password",type:"password",value:""}]),a=Object(l.a)(e,2),t=a[0],r=a[1],s=Object(n.useState)(!0),i=Object(l.a)(s,2),o=i[0],u=i[1],_=Q().fetchData,p=Object(m.c)((function(e){return e})),d=p.auth,f=d.load,E=d.error,b=p.navbar.authForm,v=Object(m.b)(),g=function(e){r(t.map((function(a){return a.param===e.target.name&&(a.value=e.target.value,v(O(a))),a})))},N=function(e){e.preventDefault();var a=!1;if(t.forEach((function(e){if(!e.value){if(o&&"username"===e.param)return;v(w(e)),a=!0}})),!a){var n=Object(l.a)(t,3),c=n[0],r=n[1],s=n[2],m={email:r.value,password:s.value};v(_({url:"/auth/".concat(o?"login":"register"),method:"post",data:o?Object($.a)({},m):Object($.a)(Object($.a)({},m),{},{username:c.value}),options:{fetchStart:h,fetchSuccess:k,fetchFailure:y}}))}},S=t.map((function(e){var a=function(e){var a="";return E.forEach((function(t){e.param===t.param&&(a=t.msg)})),a}(e);return c.a.createElement("label",{key:e.param,className:"field ".concat(o&&"username"===e.param&&"field--close")},c.a.createElement("div",{className:"field__container-info"},c.a.createElement("span",{className:"field__name"},e.param,":"),c.a.createElement("div",{className:"field__container-msg ".concat(!a&&"field__container-msg--close")},c.a.createElement(Z.l,{className:"field__icon"}),c.a.createElement("span",{className:"field__msg"},a,c.a.createElement("span",{className:"field__triangle"})))),c.a.createElement("input",{className:"field__input ".concat(a&&"field__input--warning"),type:e.type,value:e.value,name:e.param,onChange:g,autoComplete:"off"}))}));return c.a.createElement("div",{className:"auth-form ".concat(b&&"auth-form--open")},c.a.createElement("div",{className:"auth-form__loader ".concat(f&&"auth-form__loader--active")},c.a.createElement("div",{className:"auth-form__spinner"})),c.a.createElement("button",{className:"auth-form__btn btn",onClick:function(){return v(G())}},c.a.createElement(Z.o,null)),c.a.createElement("h2",{className:"auth-form__title"},o?"Login":"Register"),c.a.createElement("form",{onSubmit:N,className:"auth-form__container-fields"},S,c.a.createElement("button",{className:"auth-form__btn-handler"})),c.a.createElement("div",{className:"auth-form__container-btns"},c.a.createElement("button",{onClick:N,className:"btn btn-primary"},o?c.a.createElement(ee.g,{className:"btn__icon"}):c.a.createElement(ee.b,{className:"btn__icon"}),c.a.createElement("span",{className:"btn__name"},o?"Sign In":"Sign Up")),c.a.createElement("button",{onClick:function(){u(!o),v(j())},className:"btn btn-simple"},o?c.a.createElement(ee.b,{className:"btn__icon"}):c.a.createElement(ee.g,{className:"btn__icon"}),c.a.createElement("span",{className:"btn__name"},o?"Sign Up":"Sign In"))))},te=t(19),ne=t(14),ce=t(11),re="SET_TEXT_SEARCH";var se=function(e){var a=Object(m.c)((function(e){return e})),t=a.auth.token,r=a.navbar,s=r.dropMenu,i=r.authForm,o=Object(m.b)(),u=Object(n.useState)(""),_=Object(l.a)(u,2),p=_[0],d=_[1],f=Object(I.h)(),b=Object(I.g)();return c.a.createElement("div",{className:"nav"},c.a.createElement("div",{className:"nav__menu"},c.a.createElement(T.c,{to:"/",className:"nav__link nav__logo-link",onClick:function(){return o(G())}},c.a.createElement(te.a,{className:"nav__logo"}),c.a.createElement("span",{className:"nav__link-name"},"AD-Stack")),c.a.createElement("form",{onSubmit:function(e){(e.preventDefault(),p.trim().length)&&(o(G()),o({type:re,payload:p}),"/search"!==f.pathname&&b.push("/search"))},className:"nav__search"},c.a.createElement("input",{type:"text",value:p,className:"nav__search-input",onChange:function(e){d(e.target.value),o(G())},placeholder:"Search",autoComplete:"off"}),c.a.createElement("button",{className:"nav__search-btn"},c.a.createElement(ce.c,null))),c.a.createElement(T.c,{exact:!0,to:"/categories",activeClassName:"nav__link--active",className:"nav__link",onClick:function(){return o(G())}},c.a.createElement(ee.j,null),c.a.createElement("span",{className:"nav__link-name"},"Categories")),c.a.createElement(T.c,{to:"/users",activeClassName:"nav__link--active",className:"nav__link",onClick:function(){return o(G())}},c.a.createElement(ne.e,null),c.a.createElement("span",{className:"nav__link-name"},"Users")),t.user&&t.user.typeUser?c.a.createElement(c.a.Fragment,null,c.a.createElement(T.c,{to:"/create",activeClassName:"nav__link--active",className:"nav__link",onClick:function(){return o(G())}},c.a.createElement(ne.d,null),c.a.createElement("span",{className:"nav__link-name"},"Create")),c.a.createElement("div",{className:"nav__container-drop"},c.a.createElement("button",{onClick:function(){return o({type:P})},className:"nav__link nav__btn ".concat(s&&"nav__link--active")},c.a.createElement("span",{className:"nav__container-img"},c.a.createElement("img",{className:"nav__img",src:t.user.ava,alt:"userImage"})),c.a.createElement("span",{className:"nav__link-name"},t.user.username)),c.a.createElement("div",{className:"nav__drop-menu ".concat(s&&"nav__drop-menu--open")},c.a.createElement(T.c,{to:"/user",exact:!0,activeClassName:"nav__link--active",className:"nav__link",onClick:function(){return o(G())}},c.a.createElement(ee.k,null),c.a.createElement("span",{className:"nav__link-name"},"Profile")),c.a.createElement(T.c,{to:"/bookmarks",activeClassName:"nav__link--active",className:"nav__link",onClick:function(){return o(G())}},c.a.createElement(Z.d,null),c.a.createElement("span",{className:"nav__link-name"},"Bookmarks")),c.a.createElement("button",{className:"nav__link",onClick:function(){o({type:E}),o(G())}},c.a.createElement(ee.h,null),c.a.createElement("span",{className:"nav__link-name"},"Sign Out"))))):c.a.createElement("button",{className:"nav__link ".concat(i&&"nav__link--active"),onClick:function(){return o(q())}},c.a.createElement(ee.g,null),c.a.createElement("span",{className:"nav__link-name"},"Sign In"))))},le=t.p+"static/media/undraw_in_sync_xwsa.3a743f30.svg";var me=function(e){var a=Object(m.c)((function(e){return e.auth})).token,t=Object(m.b)();return c.a.createElement("div",{className:"main"},c.a.createElement("div",{className:"main__bg-content"}),c.a.createElement("div",{className:"main__bg-background"}),c.a.createElement("div",{className:"main__container-content"},c.a.createElement("div",{className:"main__content"},c.a.createElement("h1",{className:"main__title"},c.a.createElement(te.a,{className:"main__icon"}),c.a.createElement("span",{className:"main__name"},"AD-Stack")),c.a.createElement("p",{className:"main__paragraph"},"Don't wait for a better opportunity, just make an announcement and your life will be easier"),c.a.createElement("div",{className:"main__container-btns"},c.a.createElement("button",{onClick:function(){a.token?e.history.push("/create"):t(q())},className:"btn btn-primary"},c.a.createElement(ne.d,{className:"btn__icon"}),c.a.createElement("span",{className:"btn__name"},"Announce")),c.a.createElement(T.b,{to:"/categories",className:"btn link"},c.a.createElement(ee.j,{className:"btn__icon"}),c.a.createElement("span",{className:"btn__name"},"Categories")))),c.a.createElement("div",{className:"main__bg-img"},c.a.createElement("img",{src:le,className:"main__img",alt:"mainBgImage"}))))},ie=t(25),oe=t(45),ue=t.p+"static/media/undraw_agreement_aajr.24aece28.svg",_e=t.p+"static/media/undraw_Vehicle_sale_a645.108aaaf4.svg",pe=t.p+"static/media/undraw_posting_photo_v65l.84bb436d.svg",de=t.p+"static/media/undraw_suburbs_8b83.c7a6b0de.svg",fe=t.p+"static/media/undraw_Design_thinking_re_644h.1b161425.svg",Ee=t.p+"static/media/undraw_for_sale_viax.5e13d98f.svg",be=t.p+"static/media/undraw_heavy_box_agqi.b9e56771.svg",ve=t.p+"static/media/undraw_co-working_825n.cb71d625.svg",ge=t.p+"static/media/undraw_Cautious_dog_q83f.808fa8f2.svg",Ne=t.p+"static/media/undraw_eco_conscious_1y58.0396d38f.svg";var he=function(){return[{param:"transport",name:"Transport",icon:c.a.createElement(ee.a,{className:"btn__icon"}),img:_e},{param:"house_garden",name:"House and garden",icon:c.a.createElement(ie.a,{className:"btn__icon"}),img:de},{param:"electronics",name:"Electronics",icon:c.a.createElement(ee.f,{className:"btn__icon"}),img:pe},{param:"childrens_world",name:"Children's world",icon:c.a.createElement(ie.d,{className:"btn__icon"}),img:fe},{param:"real_estate",name:"Real estate",icon:c.a.createElement(ie.b,{className:"btn__icon"}),img:Ee},{param:"spare_parts_for_transport",name:"Spare parts for transport",icon:c.a.createElement(ce.d,{className:"btn__icon"}),img:be},{param:"work",name:"Work",icon:c.a.createElement(oe.a,{className:"btn__icon"}),img:ve},{param:"animals",name:"Animals",icon:c.a.createElement(te.b,{className:"btn__icon"}),img:ge},{param:"business_services",name:"Business and services",icon:c.a.createElement(ie.c,{className:"btn__icon"}),img:ue},{param:"fashion_style",name:"Fashion and style",icon:c.a.createElement(ee.d,{className:"btn__icon"}),img:Ne}]};var ke=function(){var e=he().map((function(e){return c.a.createElement(T.b,{to:"/categories/".concat(e.param),key:e.param,className:"categories__link"},c.a.createElement("span",{className:"categories__name"},e.name),c.a.createElement("img",{src:e.img,className:"categories__image",alt:"categoryImg"}))}));return c.a.createElement("div",{className:"wrapper"},c.a.createElement("div",{className:"title"},c.a.createElement("div",{className:"title__container-name"},c.a.createElement(ee.j,{className:"title__icon"}),c.a.createElement("span",{className:"title__name"},"Categories")),c.a.createElement("span",{className:"title__description"},"Choose what you are looking for")),c.a.createElement("div",{className:"categories"},e))};var ye=function(){var e="rgb(239, 240, 240)";return c.a.createElement("svg",{version:"1.1",className:"page-loader",xmlns:"http://www.w3.org/2000/svg",xlinkHref:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 100 100",enableBackground:"new 0 0 100 100"},c.a.createElement("path",{fill:e,d:"M31.6,3.5C5.9,13.6-6.6,42.7,3.5,68.4c10.1,25.7,39.2,38.3,64.9,28.1l-3.1-7.9c-21.3,8.4-45.4-2-53.8-23.3\r c-8.4-21.3,2-45.4,23.3-53.8L31.6,3.5z"},c.a.createElement("animateTransform",{attributeName:"transform",attributeType:"XML",type:"rotate",dur:"2s",from:"0 50 50",to:"360 50 50",repeatCount:"indefinite"})),c.a.createElement("path",{fill:e,d:"M42.3,39.6c5.7-4.3,13.9-3.1,18.1,2.7c4.3,5.7,3.1,13.9-2.7,18.1l4.1,5.5c8.8-6.5,10.6-19,4.1-27.7\r c-6.5-8.8-19-10.6-27.7-4.1L42.3,39.6z"},c.a.createElement("animateTransform",{attributeName:"transform",attributeType:"XML",type:"rotate",dur:"1s",from:"0 50 50",to:"-360 50 50",repeatCount:"indefinite"})),c.a.createElement("path",{fill:e,d:"M82,35.7C74.1,18,53.4,10.1,35.7,18S10.1,46.6,18,64.3l7.6-3.4c-6-13.5,0-29.3,13.5-35.3s29.3,0,35.3,13.5\r L82,35.7z"},c.a.createElement("animateTransform",{attributeName:"transform",attributeType:"XML",type:"rotate",dur:"2s",from:"0 50 50",to:"360 50 50",repeatCount:"indefinite"})))};var we=function(e){var a=Object(n.useState)([]),t=Object(l.a)(a,2),r=t[0],s=t[1],i=Object(n.useState)(!0),o=Object(l.a)(i,2),u=o[0],_=o[1],p=Q().fetchData,d=Object(m.c)((function(e){return e.search})).text,f=he(),E=e.match.params.categoryName;Object(n.useEffect)((function(){(function(){var e=Object(D.a)(L.a.mark((function e(){var a;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,_(!0),e.next=4,p({url:E?"/announcement/get-announcements/".concat(E):"/announcement/search-announcements",method:E?"get":"post",data:E?null:{searchText:d},options:{isLocalStorage:!0}});case 4:a=e.sent,s(a),_(!1),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(0);case 11:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}})()()}),[E,p,d]);var b=r.length&&r.map((function(e){return c.a.createElement(T.b,{className:"announc__link",key:e._id,to:"/details/".concat(e._id)},c.a.createElement("div",{className:"announc__container-img"},c.a.createElement("span",{className:"announc__price"},e.price," ",c.a.createElement("span",{className:"announc__grivna-sign"},"\u20b4")),e.image?c.a.createElement("img",{className:"announc__image",src:e.image.path,alt:"".concat(E,"Img")}):c.a.createElement("div",{className:"announc__plug-image"},c.a.createElement(Z.e,{className:"announc__plug-icon"}),c.a.createElement("span",{className:"announc__plug-name"},"No Images")),c.a.createElement("span",{className:"announc__date"},e.date.slice(0,10))),c.a.createElement("div",{className:"announc__container-title"},c.a.createElement("span",{className:"announc__title"},e.title)))})),v=function(){var e;return f.forEach((function(a){a.param===E&&(e=a)})),e};return u?c.a.createElement("div",{className:"wrapper"},c.a.createElement(ye,null)):c.a.createElement("div",{className:"wrapper"},c.a.createElement("div",{className:"title"},c.a.createElement("div",{className:"title__container-name"},E?v().icon:c.a.createElement(ee.e,null),c.a.createElement("span",{className:"title__name"},E?v().name:"Search")),c.a.createElement("span",{className:"title__description"},E?"Choose what interests you":"Search results for: ".concat(d))),c.a.createElement("div",{className:"announc ".concat(!b.length&&"announc-empty")},b.length?b:c.a.createElement("div",{className:"plug-text"},E?"Temporary empty":"No results for: ".concat(d))))},Oe=t(20),je=t(46),Se=t.n(je);var xe=function(e){var a=e.message,t=e.isQuestion,r=e.owner,s=e.setNewAnswer,i=e.deleteHandler,o=Object(n.useState)(!1),u=Object(l.a)(o,2),_=u[0],p=u[1],d=Object(n.useState)(""),f=Object(l.a)(d,2),E=f[0],b=f[1],v=Q().fetchData,g=Object(m.c)((function(e){return e.auth})).token,N=function(){var e=Object(D.a)(L.a.mark((function e(t){var n,c,r;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),e.prev=1,E.trim().length){e.next=4;break}return e.abrupt("return");case 4:return n=a.announcement,e.next=7,v({url:"/message/create-message",method:"post",data:{announcement:n,content:E,question:a._id},options:{isLocalStorage:!0}});case 7:c=e.sent,r={ava:g.user.ava,typeUser:g.user.typeUser,username:g.user.username,_id:g.user._id},s(Object($.a)(Object($.a)({},c),{},{owner:r})),b(""),p(!1),e.next=16;break;case 14:e.prev=14,e.t0=e.catch(1);case 16:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(a){return e.apply(this,arguments)}}(),h=function(){var e=Object(D.a)(L.a.mark((function e(a){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i(a),e.next=4,v({url:"/message/delete-message/".concat(a),method:"delete",data:{isQuestion:t},options:{isLocalStorage:!0}});case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(0);case 8:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(a){return e.apply(this,arguments)}}();return c.a.createElement("div",{className:"msg ".concat(!t&&"msg-answer")},c.a.createElement("div",{className:"msg__left-side"},g.token&&a.owner._id===g.user._id&&c.a.createElement("button",{className:"msg__btn-delete btn btn-simple",onClick:function(){return h(a._id)}},c.a.createElement(Z.o,null)),c.a.createElement(T.b,{to:"/user/".concat(a.owner._id),className:"msg__container-ava"},c.a.createElement("img",{src:a.owner.ava,className:"msg__ava",alt:"userAva"}))),c.a.createElement("div",{className:"msg__right-side"},c.a.createElement("div",{className:"msg__title"},"admin"===a.owner.typeUser?c.a.createElement(ce.f,{className:"msg__type-icon msg__type-icon--admin"}):c.a.createElement(ce.e,{className:"msg__type-icon ".concat(a.owner._id===r&&"msg__type-icon--owner")}),c.a.createElement(T.b,{to:"/user/".concat(a.owner._id),className:"msg__username"},a.owner.username),c.a.createElement("span",{className:"msg__date"},Se()(a.date).calendar())),c.a.createElement("div",{className:"msg__content"},a.content),t&&c.a.createElement("div",{className:"msg__container-reply"},c.a.createElement("button",{className:"msg__btn-reply btn btn-simple ".concat(g.token?_&&"msg__btn-reply--close":"btn-disabled"),onClick:function(){g.token&&p(!_)}},c.a.createElement("div",{className:"btn__msg"},"Login, to reply!",c.a.createElement("span",{className:"btn__triangle"})),_?c.a.createElement(Z.o,null):c.a.createElement(c.a.Fragment,null,c.a.createElement(ce.b,{className:"btn__icon"}),c.a.createElement("span",{className:"btn__name"},"Reply"))),c.a.createElement("form",{onSubmit:N,className:"msg__form-reply ".concat(_&&"msg__form-reply--open")},c.a.createElement("input",{type:"text",className:"msg__input",value:E,onChange:function(e){b(e.target.value)},placeholder:"Write your answer here"}),c.a.createElement("button",{className:"msg__btn-apply btn btn-primary ".concat(!E.trim().length&&"btn-disabled")},c.a.createElement("div",{className:"btn__msg"},"Type something to reply!",c.a.createElement("span",{className:"btn__triangle"})),c.a.createElement(Z.f,{className:"btn__icon"}),c.a.createElement("span",{className:"btn__name"},"Apply"))))))};var Ce=function(e){var a=e.question,t=e.isNewQuestion,r=e.owner,s=e.deleteQuestion,m=Object(n.useState)([]),i=Object(l.a)(m,2),o=i[0],u=i[1],_=Object(n.useState)(!0),p=Object(l.a)(_,2),d=p[0],f=p[1],E=Q().fetchData;Object(n.useEffect)((function(){var e=function(){var e=Object(D.a)(L.a.mark((function e(){var t;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E({url:"/message/get-messages",method:"post",data:{announcement:a.announcement,question:a._id},options:{isLocalStorage:!0}});case 3:t=e.sent,u(t),f(!1),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();t?f(!1):e()}),[E,a,t]);var b=function(e){u(o.filter((function(a){return a._id!==e})))},v=o&&o.map((function(e){return c.a.createElement(xe,{message:e,key:e._id,owner:r,deleteHandler:b})}));return c.a.createElement("div",null,c.a.createElement(xe,{message:a,isQuestion:!0,owner:r,setNewAnswer:function(e){u([e].concat(Object(Oe.a)(o)))},deleteHandler:s}),c.a.createElement("div",{className:"container-msgs container-questions"},d?c.a.createElement("div",{className:"loader"}):v))};var Ae=function(e){var a=e.announcement,t=e.owner,r=e.focus,s=Object(n.useState)([]),i=Object(l.a)(s,2),o=i[0],u=i[1],_=Object(n.useState)(""),p=Object(l.a)(_,2),d=p[0],f=p[1],E=Object(n.useState)(!0),b=Object(l.a)(E,2),v=b[0],g=b[1],N=Object(m.c)((function(e){return e.auth})).token,h=Object(m.b)(),k=Q().fetchData;Object(n.useEffect)((function(){(function(){var e=Object(D.a)(L.a.mark((function e(){var t;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k({url:"/message/get-messages",method:"post",data:{announcement:a},options:{isLocalStorage:!0}});case 3:t=e.sent,u(t),g(!1),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}})()()}),[k,a]);var y=function(e){u(o.filter((function(a){return a._id!==e})))},w=o.map((function(e){return c.a.createElement(Ce,{key:e._id,question:e,isNewQuestion:e.isNewQuestion,owner:t,deleteQuestion:y})})),O=function(){var e=Object(D.a)(L.a.mark((function e(){var t,n;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,d.trim().length){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,k({url:"/message/create-message",method:"post",data:{announcement:a,content:d},options:{isLocalStorage:!0}});case 5:t=e.sent,n={ava:N.user.ava,typeUser:N.user.typeUser,username:N.user.username,_id:N.user._id},u([Object($.a)(Object($.a)({},t),{},{owner:n,isNewQuestion:!0})].concat(Object(Oe.a)(o))),f(""),e.next=13;break;case 11:e.prev=11,e.t0=e.catch(0);case 13:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}();return c.a.createElement(c.a.Fragment,null,N.token?c.a.createElement("div",{className:"comment-form msg"},c.a.createElement("div",{className:"comment-form__left-side msg__left-side"},c.a.createElement(T.b,{to:"/user",className:"comment-form__container-ava msg__container-ava"},c.a.createElement("img",{src:N.user.ava,className:"comment-form__ava msg__ava",alt:"userAva"}))),c.a.createElement("div",{className:"comment-form__right-side msg__right-side"},c.a.createElement("div",{className:"comment-form__title msg__title"},"admin"===N.user.typeUser?c.a.createElement(ce.f,{className:"comment-form__type-icon msg__type-icon msg__type-icon--admin"}):c.a.createElement(ce.e,{className:"comment-form__type-icon msg__type-icon ".concat(N.user._id===t&&"msg__type-icon--owner")}),c.a.createElement(T.b,{to:"/user",className:"comment-form__username msg__username"},N.user.username)),c.a.createElement("div",{className:"comment-form__container-text"},c.a.createElement("textarea",{className:"comment-form__textarea msg__content",value:d,onChange:function(e){f(e.target.value)},placeholder:"Leave a question",ref:r})),c.a.createElement("button",{className:"comment-form__btn-post btn btn-primary ".concat(!d.trim().length&&"btn-disabled"),onClick:O},c.a.createElement("div",{className:"btn__msg"},"Type something to comment!",c.a.createElement("span",{className:"btn__triangle"})),c.a.createElement("span",{className:"btn__name"},"Comment"),c.a.createElement(Z.a,{className:"btn__icon"})))):c.a.createElement("div",{className:"comment-warning"},c.a.createElement(Z.l,{className:"comment-warning__icon"}),c.a.createElement("span",{className:"comment-warning__title"},"Please login, to write a question"),c.a.createElement("button",{className:"comment-warning__btn btn btn-simple",onClick:function(){return h(q())}},c.a.createElement(ee.g,{className:"btn__icon"}),c.a.createElement("span",{className:"btn__name"},"Login"))),c.a.createElement("div",{className:"container-msgs"},v?c.a.createElement("div",{className:"loader"}):w.length?w:c.a.createElement("div",{className:"plug-text"},"No questions")))};var Te=function(e){var a=Object(n.useState)({images:[]}),t=Object(l.a)(a,2),r=t[0],s=t[1],i=Object(n.useRef)(),o=Q().fetchData,u=he(),_=Object(n.useState)(!0),p=Object(l.a)(_,2),d=p[0],f=p[1],E=Object(n.useState)(!1),b=Object(l.a)(E,2),v=b[0],g=b[1],N=Object(m.c)((function(e){return e})),h=N.auth.token,k=N.bkmarks.bookmarks,y=Object(m.b)(),w=e.match.params.announcementId;Object(n.useEffect)((function(){(function(){var e=Object(D.a)(L.a.mark((function e(){var a;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o({url:"/announcement/get-announcement/".concat(w),method:"get",data:null,options:{isLocalStorage:!0}});case 3:a=e.sent,s(a),f(!1),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}})()()}),[w,o]),Object(n.useEffect)((function(){var e=!1;k.forEach((function(a){a._id===r._id&&(e=!0)})),g(e)}),[k,r._id]);var O=function(){var e;return r.images.forEach((function(a){a.statusPreview&&(e=a.path)})),e},j=function(){var e=Object(D.a)(L.a.mark((function e(){var a;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,v?y(Y(r._id)):(a={image:O(),owner:{ava:r.owner.ava,typeUser:r.owner.typeUser,username:r.owner.username,_id:r.owner._id},price:r.price,tag:r.tag,title:r.title,_id:r._id},y(X(Object($.a)({},a)))),e.next=4,o({url:v?"/auth/delete-bookmark":"/auth/create-bookmark",method:v?"delete":"post",data:{announcement:r._id,isCreate:!v&&!0},options:{isLocalStorage:!0}});case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(0);case 8:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}(),S=r.images.map((function(e){return c.a.createElement("button",{key:e._id,className:"details-ad__tab-btn ".concat(e.statusPreview&&"details-ad__tab-btn--active"),onClick:function(){return a=e._id,void s(Object($.a)(Object($.a)({},r),{},{images:r.images.map((function(e){return e._id===a?(e.statusPreview||(e.statusPreview=!0),e):(e.statusPreview=!1,e)}))}));var a}},c.a.createElement("img",{src:e.path,className:"details-ad__tab-image",alt:"imgTab"}))})),x=function(e){for(var a=0;a<r.images.length;a++)if(r.images[a].statusPreview){r.images[a].statusPreview=!1;var t=e?a+1:a-1;-1===t?r.images[r.images.length-1].statusPreview=!0:t===r.images.length?r.images[0].statusPreview=!0:r.images[t].statusPreview=!0;break}s(Object($.a)(Object($.a)({},r),{},{images:r.images}))},C=r.images.map((function(e){return c.a.createElement("img",{src:e.path,key:e._id,className:"details-ad__preview-img ".concat(e.statusPreview&&"details-ad__preview-img--active"),alt:"PreviewImg"})}));if(d)return c.a.createElement("div",{className:"wrapper"},c.a.createElement(ye,null));var A=function(){var e;return u.forEach((function(a){a.param===r.tag&&(e=a)})),e}(),I=A.icon,U=A.name;return c.a.createElement("div",{className:"wrapper"},c.a.createElement("div",{className:"title title-simple"},c.a.createElement("div",{className:"title__container-name"},c.a.createElement(ee.i,{className:"title__icon"}),c.a.createElement("span",{className:"title__name"},"Details")),c.a.createElement("span",{className:"title__description"},"Details of: ",r.title)),c.a.createElement("div",{className:"details-ad"},c.a.createElement("div",{className:"details-ad__container-imgs"},c.a.createElement("div",{className:"details-ad__container-preview"},r.images.length?c.a.createElement(c.a.Fragment,null,C,c.a.createElement("button",{className:"details-ad__move-btn details-ad__right-btn",onClick:function(){return x(!1)}},c.a.createElement(Z.h,null)),c.a.createElement("button",{className:"details-ad__move-btn details-ad__left-btn",onClick:function(){return x(!0)}},c.a.createElement(Z.g,null))):c.a.createElement("div",{className:"announc__plug-image"},c.a.createElement(Z.e,{className:"announc__plug-icon"}),c.a.createElement("span",{className:"announc__plug-name"},"No Images"))),c.a.createElement("div",{className:"details-ad__imgtabs"},c.a.createElement("div",{className:"details-ad__container-imgtabs"},S))),c.a.createElement("div",{className:"details-ad__container-info"},h.token&&(h.user._id===r.owner._id?c.a.createElement(T.b,{className:"details-ad__btn-edit link",to:"/edit/".concat(r._id)},c.a.createElement(Z.k,null)):c.a.createElement("button",{className:"details-ad__btn-edit link ".concat(v&&"details-ad__bookmark"),onClick:j},v?c.a.createElement(Z.b,null):c.a.createElement(Z.c,null))),c.a.createElement("h3",{className:"details-ad__title"},r.title),c.a.createElement("div",{className:"details-ad__container-price"},c.a.createElement("button",{className:"details-ad__btn-message btn btn-primary",onClick:function(){h.token?i.current.focus():y(q())}},c.a.createElement(ce.a,{className:"btn__icon"}),c.a.createElement("span",{className:"btn__name"},"Ask a question")),c.a.createElement("div",{className:"details-ad__price"},r.price," \u20b4")),c.a.createElement("div",{className:"details-ad__description-title"},"Description:"),c.a.createElement("div",{className:"details-ad__description"},r.description),c.a.createElement("div",{className:"details-ad__extra-info"},c.a.createElement("div",{className:"details-ad__container-row-info"},c.a.createElement("div",{className:"details-ad__column-info"},c.a.createElement("span",{className:"details-ad__column-title"},"Category:"),c.a.createElement(T.b,{to:"/categories/".concat(r.tag),className:"details-ad__link btn link"},I,c.a.createElement("span",{className:"btn__name"},U))),c.a.createElement("div",{className:"details-ad__column-info"},c.a.createElement("span",{className:"details-ad__column-title"},"Last updated:"),c.a.createElement("span",{className:"details-ad__column-content details-ad__date"},r.date.slice(0,10)))),c.a.createElement("div",{className:"details-ad__container-row-user"},c.a.createElement(T.b,{to:"/user/".concat(r.owner._id),className:"details-ad__container-ava"},c.a.createElement("img",{src:r.owner.ava,alt:"userImg",className:"details-ad__ava"})),c.a.createElement("div",{className:"details-ad__container-user-info"},c.a.createElement(T.b,{to:"/user/".concat(r.owner._id),className:"details-ad__username"},r.owner.username),c.a.createElement("span",{className:"details-ad__typeUser"},"admin"===r.owner.typeUser?c.a.createElement(ce.f,{className:"details-ad__label-icon-type"}):c.a.createElement(ce.e,{className:"details-ad__label-icon-type"}),c.a.createElement("span",{className:"details-ad__label-user-type"},r.owner.typeUser))),c.a.createElement(T.b,{to:"/user/".concat(r.owner._id),className:"details-ad__btn-user btn link"},c.a.createElement("span",{className:"btn__name"},"Other announce"),c.a.createElement(Z.a,{className:"btn__icon"})))))),c.a.createElement(Ae,{announcement:r._id,focus:i,owner:r.owner._id}))},Ie=t.p+"static/media/undraw_data_trends_b0wg.bac34a1c.svg",Ue=t.p+"static/media/undraw_content_vbqo.3488cbea.svg";var Le=function(e){var a=Q().fetchData,t=he(),r=e.match.params.announcementId,s=Object(n.useState)(!0),i=Object(l.a)(s,2),o=i[0],u=i[1],_=Object(m.c)((function(e){return e.navbar})).popupWarning,p=Object(m.b)(),d=Object(n.useState)([]),f=Object(l.a)(d,2),E=f[0],b=f[1];Object(n.useEffect)((function(){var e=function(){var e=Object(D.a)(L.a.mark((function e(){var t;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a({url:"/announcement/get-announcement_for_edit/".concat(r),method:"get",data:null,options:{isLocalStorage:!0}});case 3:t=e.sent,b((function(e){return e.map((function(e){return Object.keys(t).forEach((function(a){e.param===a&&(e.value=t[a])})),e}))})),u(!1),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();b([{param:"title",name:"Title",value:"",msg:"Give some name to your announcement"},{param:"description",name:"Description",value:"",msg:"Describe what you want to expose, give some characteristics"},{param:"tag",name:"Tag name",value:"electronics",msg:"Tag name is the name of the category to which you want to place your announcement"},{param:"price",name:"Price",value:"0",msg:"The price of exhibited product or service (It is not a required attribute)"},{param:"imagesAnnouncements",name:"Images",value:{},msg:"Attach images of the exhibited product or images that associate this announcement"},{param:"indexPreviewImage",name:"Preview image",value:"0",msg:"Select preview image among chosen"}]),r&&e(),u(!1)}),[r,a]);var v=function(e){b(E.map((function(a){return a.param===e.target.name&&("imagesAnnouncements"===a.param?a.value=e.target.files:a.value=e.target.value),a})))},g=function(){var e=!1;return E.forEach((function(a){if("string"===typeof a.value&&!a.value.trim().length){if("imagesAnnouncements"===a.param||"indexPreviewImage"===a.param||0===a.value||a.value>0)return;e=!0}})),e},N=function(){var t=Object(D.a)(L.a.mark((function t(n){var c,s;return L.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.prev=1,c=new FormData,E.forEach((function(e){"imagesAnnouncements"===e.param?Array.prototype.forEach.call(e.value,(function(e){c.append("imagesAnnouncements",e,e.name)})):c.set(e.param,e.value)})),t.next=6,a({url:r?"/announcement/edit-announcement/".concat(r):"/announcement/create-announcement",method:"post",data:c,options:{isLocalStorage:!0}});case 6:s=t.sent,e.history.push("/details/".concat(s.id)),t.next=12;break;case 10:t.prev=10,t.t0=t.catch(1);case 12:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}(),h=function(){var t=Object(D.a)(L.a.mark((function t(){var n;return L.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return p(G()),t.next=3,a({url:"/announcement/delete-announcement/".concat(r),method:"delete",data:null,options:{isLocalStorage:!0}});case 3:E.forEach((function(e){"tag"===e.param&&(n=e.value)})),e.history.push("/categories/".concat(n));case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),k=E.map((function(e){if("tag"===e.param)return c.a.createElement("div",{className:"field field-select",key:e.param},c.a.createElement("div",{className:"field__container-info"},c.a.createElement("span",{className:"field__name"},e.name),c.a.createElement("div",{className:"field__container-msg"},c.a.createElement(Z.l,{className:"field__icon field__info-icon"}),c.a.createElement("span",{className:"field__msg field__msg-info"},e.msg,c.a.createElement("span",{className:"field__triangle"})))),c.a.createElement("select",{className:"field__select btn",name:e.param,value:e.value,onChange:v},t.map((function(e){return c.a.createElement("option",{value:e.param,key:e.param,className:"field__option"},e.name)}))));if("description"===e.param)return c.a.createElement("label",{key:e.param,className:"field field-custom-height"},c.a.createElement("div",{className:"field__container-info"},c.a.createElement("span",{className:"field__name"},e.name,":"),c.a.createElement("div",{className:"field__container-msg"},c.a.createElement(Z.l,{className:"field__icon field__info-icon"}),c.a.createElement("span",{className:"field__msg field__msg-info"},e.msg,c.a.createElement("span",{className:"field__triangle"})))),c.a.createElement("textarea",{name:e.param,value:e.value,onChange:v,className:"field__textarea"}));if("imagesAnnouncements"===e.param)return c.a.createElement("div",{key:e.param,className:"field field-select"},c.a.createElement("div",{className:"field__container-info"},c.a.createElement("span",{className:"field__name"},e.name),c.a.createElement("div",{className:"field__container-msg"},c.a.createElement(Z.l,{className:"field__icon field__info-icon"}),c.a.createElement("span",{className:"field__msg field__msg-info"},e.msg,c.a.createElement("span",{className:"field__triangle"})))),c.a.createElement("label",{className:"field__label-file btn"},c.a.createElement(Z.n,{className:"btn__icon"})," ",c.a.createElement("span",{className:"btn__name"},r?"Reselect images":"Select images"),c.a.createElement("input",{type:"file",name:e.param,multiple:!0,onChange:v,className:"field__input-handler"})));if("indexPreviewImage"===e.param){var a={};return E.forEach((function(e){"imagesAnnouncements"===e.param&&(a=e.value)})),c.a.createElement("div",{className:"field field-select ".concat(0===Object.entries(a).length&&"field-select--close"),key:e.param},c.a.createElement("div",{className:"field__container-info"},c.a.createElement("span",{className:"field__name"},e.name),c.a.createElement("div",{className:"field__container-msg"},c.a.createElement(Z.l,{className:"field__icon field__info-icon"}),c.a.createElement("span",{className:"field__msg field__msg-info"},e.msg,c.a.createElement("span",{className:"field__triangle"})))),c.a.createElement("select",{className:"field__select btn",name:e.param,value:e.value,onChange:v},a&&Array.prototype.map.call(a,(function(e,a){return c.a.createElement("option",{key:e.name,value:a,className:"field__option"},e.name)}))))}return c.a.createElement("label",{key:e.param,className:"field"},c.a.createElement("div",{className:"field__container-info"},c.a.createElement("span",{className:"field__name"},e.name,":"),c.a.createElement("div",{className:"field__container-msg"},c.a.createElement(Z.l,{className:"field__icon field__info-icon"}),c.a.createElement("span",{className:"field__msg field__msg-info"},e.msg,c.a.createElement("span",{className:"field__triangle"})))),c.a.createElement("input",{className:"field__input",type:"text",value:e.value,name:e.param,onChange:v,autoComplete:"off"}))}));return o?c.a.createElement("div",{className:"wrapper"},c.a.createElement(ye,null)):c.a.createElement("div",{className:"wrapper"},c.a.createElement("div",{className:"title title-simple"},c.a.createElement("div",{className:"title__container-name"},r?c.a.createElement(ne.a,{className:"title__icon"}):c.a.createElement(Z.j,{className:"title__icon"}),c.a.createElement("span",{className:"title__name"},r?"Edit":"Create")),c.a.createElement("span",{className:"title__description"},r?"Edit or delete your announcement":"Create new announcement")),c.a.createElement("div",{className:"popup ".concat(_&&"popup--active")},c.a.createElement("div",{className:"popup__container-info"},c.a.createElement(ee.l,{className:"popup__icon"}),c.a.createElement("span",{className:"popup__title"},"WARNING"),c.a.createElement("p",{className:"popup__description"},"Are you sure about that?")),c.a.createElement("div",{className:"popup__container-bts"},c.a.createElement("button",{className:"btn btn-warning",onClick:h},c.a.createElement(te.c,{className:"btn__icon"}),c.a.createElement("span",{className:"btn__name"},"Yes")),c.a.createElement("button",{className:"btn btn-simple",onClick:function(){return p(G())}},c.a.createElement(te.d,{className:"btn__icon"}),c.a.createElement("span",{className:"btn__name"},"No")))),c.a.createElement("div",{className:"form"},c.a.createElement("div",{className:"form__main-side"},c.a.createElement("form",{className:"form__container-fields",onSubmit:N},k,c.a.createElement("button",{className:"form__btn-handler"})),c.a.createElement("div",{className:"form__container-btns"},c.a.createElement("button",{className:"btn ".concat(g()?"btn-disabled":r?"btn-simple":"btn-success"),onClick:g()?function(){}:N},c.a.createElement("div",{className:"btn__msg"},"Fill all fields!",c.a.createElement("span",{className:"btn__triangle"})),r?c.a.createElement(ne.a,{className:"btn__icon"}):c.a.createElement(ne.d,{className:"btn__icon"}),c.a.createElement("span",{className:"btn__name"},r?"Edit":"Create")),r&&c.a.createElement("button",{className:"btn btn-danger",onClick:function(){return p({type:B})}},c.a.createElement(ee.c,{className:"btn__icon"}),c.a.createElement("span",{className:"btn__name"},"Delete")))),c.a.createElement("div",{className:"form__bg-side"},c.a.createElement("img",{src:r?Ue:Ie,alt:"bgImage",className:"form__image"}))))};var De=function(e){var a=Object(m.c)((function(e){return e})),t=a.auth,r=t.error,s=t.load,i=t.token.user,o=a.navbar.popupImage,u=e.match.params.userId,_=Object(m.b)(),p=Object(n.useState)([]),d=Object(l.a)(p,2),f=d[0],E=d[1],b=Q().fetchData,v=Object(n.useState)(!0),g=Object(l.a)(v,2),N=g[0],h=g[1],k=Object(n.useState)(0),y=Object(l.a)(k,2),I=y[0],U=y[1],R=Object(n.useState)(!1),F=Object(l.a)(R,2),P=F[0],M=F[1],H=Object(n.useState)({}),B=Object(l.a)(H,2),q=B[0],K=B[1],V=he(),J=[{param:"username",name:"Username",value:i?i.username:""},{param:"email",name:"Email",value:i?i.email:""},{param:"firstname",name:"Firstname",value:i?i.firstname:""},{param:"lastname",name:"Lastname",value:i?i.lastname:""},{param:"address",name:"Address",value:i?i.address:""},{param:"phone",name:"Phone",value:i?i.phone:""},{param:"brief",name:"Bio",value:i?i.brief:"",placeholder:"Type something about yourself, about your profession"},{param:"contacts",name:"Other contacts",value:i?i.contacts:"",placeholder:"Here you can add extra contacts or write how other can get in touch with you"}],z=Object(n.useState)(J),X=Object(l.a)(z,2),Y=X[0],$=X[1];Object(n.useEffect)((function(){M(!1)}),[i]),Object(n.useEffect)((function(){(function(){var e=Object(D.a)(L.a.mark((function e(){var a,t;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!u){e.next=6;break}return e.next=4,b({url:"/auth/get-user/".concat(u),method:"get",data:null,options:{isLocalStorage:!0}});case 4:a=e.sent,K(a);case 6:return e.next=8,b({url:"/announcement/get-user-announcements/".concat(u||i._id),method:"get",data:null,options:{isLocalStorage:!0}});case 8:t=e.sent,E(t),h(!1),e.next=15;break;case 13:e.prev=13,e.t0=e.catch(0);case 15:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}})()()}),[b,i,u]);var ee=function(e){P||M(!0),$(Y.map((function(a){return a.param===e.target.name&&(a.value=e.target.value,_(O(a))),a})))},ae=function(e){if(e.preventDefault(),P){var a=!1;if(Y.forEach((function(e){"username"!==e.param&&"email"!==e.param||e.value||(_(w(e)),a=!0)})),!a){var t={};Y.forEach((function(e){t[e.param]=e.value})),_(b({url:"/auth/update-user",method:"post",data:t,options:{fetchStart:S,fetchSuccess:x,fetchFailure:C}}))}}},te=Y.map((function(e){var a=function(e){var a="";return r.forEach((function(t){e.param===t.param&&(a=t.msg)})),a}(e);return"brief"===e.param||"contacts"===e.param?c.a.createElement("label",{key:e.param,className:"field field-custom-height"},c.a.createElement("div",{className:"field__container-info"},c.a.createElement("span",{className:"field__name"},e.name,":")),c.a.createElement("textarea",{className:"field__textarea field__textarea-short",name:e.param,value:e.value,onChange:ee,placeholder:e.placeholder})):c.a.createElement("label",{key:e.param,className:"field"},c.a.createElement("div",{className:"field__container-info"},c.a.createElement("span",{className:"field__name ".concat(("username"===e.param||"email"===e.param)&&"field__important")},e.name,":"),c.a.createElement("div",{className:"field__container-msg ".concat(!a&&"field__container-msg--close")},c.a.createElement(Z.l,{className:"field__icon"}),c.a.createElement("span",{className:"field__msg"},a,c.a.createElement("span",{className:"field__triangle"})))),c.a.createElement("input",{className:"field__input ".concat(a&&"field__input--warning"),type:"email"===e.param?"email":"text",value:e.value,name:e.param,onChange:ee,autoComplete:"off"}))})),re=function(e){return e===I},se=function(e){U(e)},le=f.map((function(e){var a=function(e){var a;return V.forEach((function(t){t.param===e.tag&&(a=t)})),a}(e),t=a.icon,n=a.name;return c.a.createElement("div",{className:"announc-item",key:e._id},c.a.createElement(T.b,{className:"announc-item__image-side",to:"/details/".concat(e._id)},e.image?c.a.createElement("img",{src:e.image,className:"announc-item__image",alt:"AnnounceImg"}):c.a.createElement("div",{className:"announc-item__plug bookmark__plug-image"},c.a.createElement(Z.e,{className:"announc-item__plug-icon bookmark__plug-icon"}),c.a.createElement("span",{className:"announc-item__plug-name bookmark__plug-name"},"No Images")),c.a.createElement("span",{className:"announc-item__date"},e.date.slice(0,10))),c.a.createElement("div",{className:"announc-item__content-side"},c.a.createElement(T.b,{className:"announc-item__title",to:"/details/".concat(e._id)},e.title),c.a.createElement("div",{className:"bookmark__container-category"},"Category:",c.a.createElement(T.b,{className:"bookmark__category btn link",to:"/categories/".concat(e.tag)},t,c.a.createElement("span",{className:"btn__name"},n))),c.a.createElement("div",{className:"announc-item__price"},e.price,c.a.createElement("span",{className:"bookmark__grivna-sign"},"\u20b4"))),!u&&c.a.createElement(T.b,{className:"announc-item__btn-edit btn link",to:"/edit/".concat(e._id)},c.a.createElement(Z.k,null)))})),me=[{name:"Announcements",icon:c.a.createElement(Z.i,{className:"btn__icon"})},{name:"Contacts",icon:c.a.createElement(ne.c,{className:"btn__icon"})},{name:"Settings",icon:c.a.createElement(Z.m,{className:"btn__icon"})}],ie=[{name:"Firstname",value:u?q.firstname:i.firstname},{name:"Lastname",value:u?q.lastname:i.lastname},{name:"Email",value:u?q.email:i.email},{name:"Phone",value:u?q.phone:i.phone},{name:"Address",value:u?q.address:i.address},{name:"Other contacts",value:u?q.contacts:i.contacts}];u&&me.pop();var oe=me.map((function(e,a){return c.a.createElement("button",{key:e.name,className:"user__btntab btn ".concat(re(a)&&"user__btntab--active"),onClick:function(){return se(a)}},e.icon,c.a.createElement("span",{className:"btn__name"},e.name))})),ue=ie.map((function(e){return c.a.createElement("div",{className:"user__contact-name",key:e.name},e.name,":",c.a.createElement("span",{className:"user__contact ".concat("Other contacts"===e.name&&"user__other-contact")},e.value?e.value:c.a.createElement("span",{className:"user__contact-plug"},"(Empty)")))}));return N?c.a.createElement("div",{className:"wrapper"},c.a.createElement(ye,null)):(i=u?q:i,c.a.createElement("div",{className:"wrapper"},c.a.createElement("div",{className:"popup-img ".concat(o&&"popup-img--active")},c.a.createElement("button",{className:"auth-form__btn btn",onClick:function(){return _(G())}},c.a.createElement(Z.o,null)),c.a.createElement("div",{className:"popup-img__container-ava"},c.a.createElement("img",{src:i.ava,className:"popup-img__ava",alt:"popupImg"})),c.a.createElement("span",{className:"popup-img__username"},i.username)),c.a.createElement("div",{className:"title title-simple"},c.a.createElement("div",{className:"title__container-name"},c.a.createElement(ce.e,null),c.a.createElement("span",{className:"title__name"},"Profile")),c.a.createElement("span",{className:"title__description"},u?"User personal cabinet":"Your personal cabinet")),c.a.createElement("div",{className:"user"},c.a.createElement("div",{className:"user__image-side"},c.a.createElement("div",{className:"user__brief"},u?c.a.createElement("button",{className:"user__btn-img",onClick:function(){return _({type:W})}},c.a.createElement("img",{src:i.ava,className:"user__image",alt:"userAva"})):c.a.createElement("label",{className:"user__btn-img"},c.a.createElement("span",{className:"user__background-ava"},c.a.createElement(Z.n,{className:"user__upload-icon"}),c.a.createElement("span",{className:"user__upload-name"},"Update image")),c.a.createElement("img",{src:i.ava,className:"user__image",alt:"userAva"}),c.a.createElement("input",{className:"user__file-handler",type:"file",onChange:function(e){var a=e.target.files[0];if(a){var t=new FormData;t.append("avatar",a,a.name),_(b({url:"/auth/update-user-image",method:"post",data:t,options:{fetchSuccess:A}}))}}})),"admin"===i.typeUser?c.a.createElement(ce.f,{className:"user__type-icon"}):c.a.createElement(ce.e,{className:"user__type-icon"})),c.a.createElement("h3",{className:"user__username"},i.username),c.a.createElement("div",{className:"user__fullname"},"(",i.lastname?i.lastname:"Lastname"," ",i.firstname?i.firstname:"Firstname",")"),c.a.createElement("div",{className:"user__brief-info"},i.brief?i.brief:u?c.a.createElement("span",{className:"user__plug-text"},"Nothing about this user or his profession"):c.a.createElement("span",null,"Type something about yourself, about your profession.."," ",c.a.createElement("button",{className:"user__link-edit",onClick:function(){return se(2)}},"Edit info"))),c.a.createElement("div",{className:"user__container-email"},c.a.createElement(ne.b,null),c.a.createElement("span",{className:"user__email"},i.email)),!u&&c.a.createElement(T.b,{to:"/bookmarks",className:"user__btn-bookmarks btn btn-primary"},c.a.createElement(Z.d,{className:"btn__icon"}),c.a.createElement("span",{className:"btn__name"},"Bookmarks"))),c.a.createElement("div",{className:"user__content-side"},c.a.createElement("div",{className:"user__container-btntabs"},oe),c.a.createElement("div",{className:"user__pagetabs"},c.a.createElement("div",{className:"user__tabpage ".concat(re(0)&&"user__tabpage--open")},le.length?le:c.a.createElement("div",{className:"plug-text"},"No Announcements")),c.a.createElement("div",{className:"user__tabpage ".concat(re(1)&&"user__tabpage--open")},c.a.createElement("div",{className:"user__container-contacts"},ue)),!u&&c.a.createElement("div",{className:"user__tabpage ".concat(re(2)&&"user__tabpage--open")},c.a.createElement("div",{className:"user-form"},c.a.createElement("div",{className:"auth-form__loader ".concat(s&&"auth-form__loader--active")},c.a.createElement("div",{className:"auth-form__spinner"})),c.a.createElement("form",{className:"user-form__fields",onSubmit:ae},te,c.a.createElement("button",{className:"user-form__btn-handler"})),c.a.createElement("div",{className:"user-form__container-btns"},c.a.createElement("div",{className:"user-form__date-container"},c.a.createElement("span",{className:"user-form__date-label"},"Last updated:"),c.a.createElement("span",{className:"user-form__date"},i.date.slice(0,10))),c.a.createElement("button",{className:"user-form__btn-cancel btn btn-simple ".concat(P&&"user-form__btn-cancel--show"),onClick:function(){$(J),M(!1),_(j())}},c.a.createElement(Z.o,{className:"btn__icon"}),c.a.createElement("span",{className:"btn__name"},"Cancel")),c.a.createElement("button",{className:"user-form__btn-apply btn btn-primary ".concat(!P&&"btn-disabled"),onClick:ae},c.a.createElement("div",{className:"btn__msg"},"Change some field to apply!",c.a.createElement("span",{className:"btn__triangle"})),c.a.createElement(Z.f,{className:"btn__icon"}),c.a.createElement("span",{className:"btn__name"},"Apply"))))))))))};var Re=function(e){var a=Q().fetchData,t=Object(n.useState)([]),r=Object(l.a)(t,2),s=r[0],i=r[1],o=Object(n.useState)(!0),u=Object(l.a)(o,2),_=u[0],p=u[1],d=Object(m.c)((function(e){return e})).auth.token;Object(n.useEffect)((function(){(function(){var e=Object(D.a)(L.a.mark((function e(){var t;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a({url:"/auth/get-users",method:"get",data:null,options:{isLocalStorage:!0}});case 3:t=e.sent,i(t),p(!1),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}})()()}),[a]);var f=function(e){e.stopPropagation(),console.log("qwe")},E=s.map((function(a){return c.a.createElement("div",{key:a._id,onClick:function(){return t=a._id,void e.history.push("/user/".concat(t));var t},className:"user-link"},d.user&&"admin"===d.user.typeUser&&c.a.createElement("button",{className:"user-link__btn-delete btn",onClick:f},c.a.createElement(Z.o,null)),c.a.createElement("div",{className:"user-link__container-img"},c.a.createElement("img",{className:"user-link__img",src:a.ava,alt:"userAva"})),c.a.createElement("div",{className:"user-link__info"},"admin"===a.typeUser?c.a.createElement(ce.f,{className:"user-link__icon"}):c.a.createElement(ce.e,{className:"user-link__icon"}),c.a.createElement("span",{className:"user-link__username"},a.username)))}));return _?c.a.createElement("div",{className:"wrapper"},c.a.createElement(ye,null)):c.a.createElement("div",{className:"wrapper"},c.a.createElement("div",{className:"title"},c.a.createElement("div",{className:"title__container-name"},c.a.createElement(ne.e,null),c.a.createElement("span",{className:"title__name"},"Users")),c.a.createElement("span",{className:"title__description"},"All registered users")),c.a.createElement("div",{className:"users"},E))};var Fe=function(){var e=Object(m.c)((function(e){return e})).bkmarks.bookmarks,a=he(),t=Object(m.b)(),n=Q().fetchData,r=function(){var e=Object(D.a)(L.a.mark((function e(a){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t(Y(a)),e.next=4,n({url:"/auth/delete-bookmark",method:"delete",data:{announcement:a},options:{isLocalStorage:!0}});case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(0);case 8:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(a){return e.apply(this,arguments)}}(),s=e.map((function(e){var t=function(e){var t;return a.forEach((function(a){a.param===e.tag&&(t=a)})),t}(e),n=t.icon,s=t.name;return c.a.createElement("div",{className:"bookmark",key:e._id},c.a.createElement("div",{className:"bookmark__image-side"},c.a.createElement(T.b,{to:"/details/".concat(e._id),className:"bookmark__container-img"},e.image?c.a.createElement("img",{src:e.image,className:"bookmark__img",alt:"AnnounceImg"}):c.a.createElement("div",{className:"bookmark__plug-image"},c.a.createElement(Z.e,{className:"bookmark__plug-icon"}),c.a.createElement("span",{className:"bookmark__plug-name"},"No Images"))),c.a.createElement("div",{className:"bookmark__price"},e.price,c.a.createElement("span",{className:"bookmark__grivna-sign"},"\u20b4"))),c.a.createElement("div",{className:"bookmark__content-side"},c.a.createElement(T.b,{className:"bookmark__title",to:"/details/".concat(e._id)},e.title),c.a.createElement("div",{className:"bookmark__container-category"},"Category:",c.a.createElement(T.b,{className:"bookmark__category btn link",to:"/categories/".concat(e.tag)},n,c.a.createElement("span",{className:"btn__name"},s))),c.a.createElement(T.b,{to:"/user/".concat(e.owner._id),className:"bookmark__owner"},c.a.createElement("span",{className:"bookmark__container-ava"},c.a.createElement("img",{src:e.owner.ava,className:"bookmark__ava",alt:"userAva"})),c.a.createElement("span",{className:"bookmark__username"},e.owner.username))),c.a.createElement("button",{className:"bookmark__btn-delete btn link",onClick:function(){return r(e._id)}},c.a.createElement(Z.o,null)))}));return c.a.createElement("div",{className:"wrapper"},c.a.createElement("div",{className:"title"},c.a.createElement("div",{className:"title__container-name"},c.a.createElement(Z.d,null),c.a.createElement("span",{className:"title__name"},"Bookmarks")),c.a.createElement("span",{className:"title__description"},"Your favourite announcements")),c.a.createElement("div",{className:"bookmarks"},s.length?s:c.a.createElement("div",{className:"plug-text"},"No bookmarks")))};var Pe=function(){var e=Object(m.c)((function(e){return e})),a=e.auth.token,t=e.navbar,r=t.dropMenu,s=t.authForm,l=t.popupWarning,i=t.popupImage,o=Object(m.b)(),u=Q().fetchData;return Object(n.useEffect)((function(){a.token&&o(u({url:"/auth/get-bookmarks",method:"get",data:null,options:{fetchSuccess:z}}))}),[o,u,a.token]),c.a.createElement(c.a.Fragment,null,c.a.createElement(se,null),c.a.createElement(ae,null),c.a.createElement("div",{onClick:function(){return o(G())},className:"background ".concat((r||s||l||i)&&"background--active")}),a.token?(a.user.typeUser,c.a.createElement(I.d,null,c.a.createElement(I.b,{exact:!0,path:"/",component:me}),c.a.createElement(I.b,{path:"/search",component:we}),c.a.createElement(I.b,{exact:!0,path:"/categories",component:ke}),c.a.createElement(I.b,{path:"/create",component:Le}),c.a.createElement(I.b,{path:"/users",component:Re}),c.a.createElement(I.b,{exact:!0,path:"/user",component:De}),c.a.createElement(I.b,{path:"/bookmarks",component:Fe}),c.a.createElement(I.b,{path:"/categories/:categoryName",component:we}),c.a.createElement(I.b,{path:"/details/:announcementId",component:Te}),c.a.createElement(I.b,{path:"/edit/:announcementId",component:Le}),c.a.createElement(I.b,{path:"/user/:userId",component:De}),c.a.createElement(I.a,{to:"/"}))):c.a.createElement(I.d,null,c.a.createElement(I.b,{exact:!0,path:"/",component:me}),c.a.createElement(I.b,{path:"/search",component:we}),c.a.createElement(I.b,{exact:!0,path:"/categories",component:ke}),c.a.createElement(I.b,{path:"/users",component:Re}),c.a.createElement(I.b,{path:"/categories/:categoryName",component:we}),c.a.createElement(I.b,{path:"/details/:announcementId",component:Te}),c.a.createElement(I.b,{path:"/user/:userId",component:De}),c.a.createElement(I.a,{to:"/"})))};var Me=function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"logo"},c.a.createElement(ye,null),c.a.createElement("div",{className:"logo__container"},c.a.createElement(te.a,{className:"logo__icon"}),c.a.createElement("span",{className:"logo__name"},"AD-Stack"))))};var He=function(){var e=Object(n.useState)(!0),a=Object(l.a)(e,2),t=a[0],r=a[1],s=Object(m.b)();return Object(n.useEffect)((function(){s({type:_}),setTimeout((function(){r(!1)}),3e3)}),[s]),t?c.a.createElement(Me,null):c.a.createElement(T.a,null,c.a.createElement(Pe,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Be=t(21),We=t(47),qe={dropMenu:!1,authForm:!1,popupWarning:!1,popupImage:!1},Ge=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qe,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case P:return{dropMenu:!e.dropMenu,authForm:!1,popupWarning:!1,popupImage:!1};case M:return{dropMenu:!1,authForm:!e.authForm,popupWarning:!1,popupImage:!1};case H:return{dropMenu:!1,authForm:!1,popupWarning:!1,popupImage:!1};case B:return{dropMenu:!1,authForm:!1,popupWarning:!e.popupWarning,popupImage:!1};case W:return{dropMenu:!1,authForm:!1,popupWarning:!1,popupImage:!e.popupImage};default:return e}},Qe={load:!1,token:{},error:[]},Ke=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qe,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case i:return{load:!0,token:{},error:[]};case o:var t=a.payload.data;return localStorage.setItem("auth",JSON.stringify(t)),{load:!1,token:t,error:[]};case u:return{load:!1,token:{},error:a.payload};case p:var n=a.payload.param;return Object($.a)(Object($.a)({},e),{},{error:[].concat(Object(Oe.a)(e.error),[{param:n,msg:"Fill this field!"}])});case d:return Object($.a)(Object($.a)({},e),{},{error:e.error.map((function(e){return e.param===a.payload.param&&(e.msg=""),e}))});case f:return Object($.a)(Object($.a)({},e),{},{error:[]});case _:var c=localStorage.getItem("auth");return c?Object($.a)(Object($.a)({},e),{},{token:JSON.parse(c)}):e;case E:return localStorage.removeItem("auth"),Object($.a)(Object($.a)({},e),{},{token:{}});case b:return Object($.a)(Object($.a)({},e),{},{load:!0});case v:var r=Object($.a)(Object($.a)({},e.token),{},{user:a.payload.data});return localStorage.setItem("auth",JSON.stringify(r)),{error:[],load:!1,token:r};case g:return Object($.a)(Object($.a)({},e),{},{load:!1,error:a.payload});case N:var s=Object($.a)(Object($.a)({},e.token),{},{user:Object($.a)(Object($.a)({},e.token.user),{},{ava:a.payload.data})});return localStorage.setItem("auth",JSON.stringify(s)),Object($.a)(Object($.a)({},e),{},{token:s});default:return e}},Ve={text:""},Je=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ve,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case re:return{text:a.payload};default:return e}},ze={bookmarks:[]},Xe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ze,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case K:return{bookmarks:a.payload.data};case V:return{bookmarks:[].concat(Object(Oe.a)(e.bookmarks),[a.payload])};case J:return{bookmarks:e.bookmarks.filter((function(e){return e._id!==a.payload}))};default:return e}},Ye=Object(Be.c)({auth:Ke,navbar:Ge,search:Je,bkmarks:Xe}),$e=Object(Be.d)(Ye,Object(Be.a)(We.a));s.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(m.a,{store:$e},c.a.createElement(He,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[79,1,2]]]);
//# sourceMappingURL=main.09f4f8a6.chunk.js.map